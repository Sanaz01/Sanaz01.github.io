<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Sanaz Agarwal">
<meta name="dcterms.date" content="2024-09-01">
<meta name="description" content="What cancer related medical tests we should get done?">

<title>Cancer Screening Tests â€“ Sanaz Agarwal</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-PHD8FEK27R"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-PHD8FEK27R', { 'anonymize_ip': true});
</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Sanaz Agarwal</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../blogs.html"> 
<span class="menu-text">Blogs</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../publications.html"> 
<span class="menu-text">Publications</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#lung-cancer-tests" id="toc-lung-cancer-tests" class="nav-link active" data-scroll-target="#lung-cancer-tests">Lung Cancer Tests</a></li>
  <li><a href="#colorectal-cancer-screening" id="toc-colorectal-cancer-screening" class="nav-link" data-scroll-target="#colorectal-cancer-screening">Colorectal Cancer Screening</a></li>
  <li><a href="#breast-cancer-tests" id="toc-breast-cancer-tests" class="nav-link" data-scroll-target="#breast-cancer-tests">Breast Cancer Tests</a></li>
  <li><a href="#cervical-cancer-tests" id="toc-cervical-cancer-tests" class="nav-link" data-scroll-target="#cervical-cancer-tests">Cervical Cancer Tests</a></li>
  <li><a href="#not-every-cancer-has-a-screening-test" id="toc-not-every-cancer-has-a-screening-test" class="nav-link" data-scroll-target="#not-every-cancer-has-a-screening-test">Not every cancer has a screening test</a></li>
  <li><a href="#what-are-multi-cancer-detection-tests-mcd" id="toc-what-are-multi-cancer-detection-tests-mcd" class="nav-link" data-scroll-target="#what-are-multi-cancer-detection-tests-mcd">What are Multi-cancer Detection Tests (MCD)?</a></li>
  <li><a href="#word-of-caution" id="toc-word-of-caution" class="nav-link" data-scroll-target="#word-of-caution">Word of caution!</a></li>
  <li><a href="#sources" id="toc-sources" class="nav-link" data-scroll-target="#sources">Sources</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Cancer Screening Tests</h1>
  <div class="quarto-categories">
    <div class="quarto-category">Cancer</div>
  </div>
  </div>

<div>
  <div class="description">
    What cancer related medical tests we should get done?
  </div>
</div>


<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Sanaz Agarwal </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">September 1, 2024</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<p>Cancer is a very strange response in our body. It emerges at the cellular level as a malignant tumor, escalates to organ level to cause functional failure and ultimately leads to deterioration of bodily systems of its host. Humans are not the only victims and not the recent ones either, with the earliest cancer discovered in <a href="https://www.thelancet.com/journals/lanonc/article/PIIS1470-2045(20)30171-6/abstract">dinosaurs</a>, who walked millions of years ago. Today, it is plaguing us at a global level. According to a report by the <a href="https://www.cancer.org/content/dam/cancer-org/research/cancer-facts-and-statistics/global-cancer-facts-and-figures/global-cancer-facts-and-figures-2024.pdf">American Cancer Society</a></p>
<blockquote class="blockquote">
<p><em>In 2022, approximately 20 million cancer cases were newly diagnosed and 9.7 million people died from the disease worldwide.</em></p>
</blockquote>
<p>At <a href="https://www.fredhutch.org/en.html">Fred Hutch Cancer Institute</a>, I get exposed to the science and research around cancer subtypes which are most difficult to treat. It is challenging to predict which cell will turn carcinogenic. An ever growing, concerned and health-conscious population (myself included) have questions about how we can prevent it; and in the worst case, prepare for it.</p>
<p>While some known prevention methods include avoiding carcinogens and applying sunscreen, they offer no assurance when genetic factors come into play. This will be explored in another blog in the future. As modern individuals (facing modern forms of diseases and epidemics) we should do our best to be prepared for what may happen in the future. This led me to wonder: <em>What tests can I get done to ensure that I am free of cancer?</em> I stumbled upon the answer I was looking for and I wanted to share it with everyone - get periodic screening tests done to be aware of what might be lurking inside our body.</p>
<p>Screening tests refer to tests done on healthy individuals <u><em>before</em></u> they show any signs/ symptoms. It acts as a safety measure before the onset of any disease. In the case of cancer, such tests help detect precancerous cellular changes. By the time symptoms appear, cancer may have begun to spread.</p>
<p>Following are the common forms of cancer screening tests. They have been discussed later in the blog.</p>
<ul>
<li>Physical examination <em>(assessment of the exterior body, habits and family medical history)</em></li>
<li>Laboratory tests <em>(obtain bodily samples from patients for laboratory analysis)</em></li>
<li>Imaging tests <em>(to image interior regions of the body)</em></li>
<li>Genetic tests <em>(checks for hereditary causes of cancer)</em></li>
</ul>
<p>If a screening test result is abnormal, diagnostic tests need to be done for further investigation into the nature of the abnormality. These secondary level tests are more specific to the organ where symptoms are shown and patientâ€™s medical history. You should always consult your physician about diagnostic tests.</p>
<p>As it is imperative for us to be aware of our bodies using these screening tests and what tests are available, I would like to list down a broad and general set of tests approved by the U.S. Food and Drug Administration (<a href="https://www.fda.gov/">FDA</a>) and recommended by the United States Preventive Services Task Force (<a href="https://www.uspreventiveservicestaskforce.org">USPSTF</a>).</p>
<section id="lung-cancer-tests" class="level3">
<h3 class="anchored" data-anchor-id="lung-cancer-tests">Lung Cancer Tests</h3>
<p><em>The leading cause of cancer death in the US</em></p>
<p>The following screening tests are available:</p>
<ul>
<li>Low-dose&nbsp;helical computed tomography (LDCT/ Spiral CT scan/ Helical CT scan)</li>
<li>Standard chest X-ray</li>
<li>Sputum cytology</li>
</ul>
<p>USPSTF recommends yearly screening tests for people who satisfy all 3 criteria:</p>
<ol type="1">
<li>have 20+ pack-year [no. of packs of cigarettes smoked a day x number of years]</li>
<li>currently smoke/ quit smoking in the last 15 yrs</li>
<li>between the age of 50-80 yrs.</li>
</ol>
</section>
<section id="colorectal-cancer-screening" class="level3">
<h3 class="anchored" data-anchor-id="colorectal-cancer-screening">Colorectal Cancer Screening</h3>
<p><em>2<sup>nd</sup> leading cause of death from cancer in the US</em></p>
<p>A stool test is a non-invasive form of test that checks for tiny amounts of blood in feces. Three types of stool tests are approved by the FDA.</p>
<ul>
<li>Guaiac Fecal Occult Blood Test (<a href="https://colorectalcancer.org/screening-prevention/screening-methods/other-screening-methods/guaiac-fecal-occult-blood-test">gFOBT</a>): It uses a chemical called guaiac to detect the presence of heme in stool samples [performed every 1 or 2 years in ages 45-80 yrs]</li>
<li>Fecal Immunochemical Test (FIT) - uses antibodies to detect hemoglobin protein</li>
<li>FIT-DNA - detects hemoglobin, in addition to certain DNA biomarkers</li>
</ul>
<p>Stool tests can be performed every 1 to 2 years in the age group of 45-80 years. Each test has its drawbacks and advantages, consult your healthcare provider to know which one is best for you.</p>
<p>Invasive tests include tests that can find abnormal colon growths (polyphs).</p>
<ul>
<li>Sigmoidoscopy [done every 5 to 10 years]</li>
<li>Colonoscopy [done every 10 years]</li>
</ul>
<p>USPSTF recommends colorectal screening for people at average risk of colorectal cancer from age 45 to 75. Beyond 75, as per the individualâ€™s medical history basis.</p>
<p>In July 2024, FDA approved Guardant Healthâ€™s <a href="https://shieldcancerscreen.com/">Shield Blood Test</a>. A <a href="https://www.nejm.org/doi/full/10.1056/NEJMoa2304714">research paper</a> shows evidence that this test is 83% effective in finding colorectal cancers.</p>
</section>
<section id="breast-cancer-tests" class="level3">
<h3 class="anchored" data-anchor-id="breast-cancer-tests">Breast Cancer Tests</h3>
<p><em>2<sup>nd</sup> leading cause of death from cancer for women in US</em></p>
<p>A basic Breast Self Exam (BSE), can be done at home to check for lumps or anything out of normal. Another test, namely Clinical Breast Exam (CBE) can be conducted by your healthcare provider. Being professionals, they are more suited to identifying lumps. For a more scientific approach, screening mammograms are conducted to detect tumors that cannot be detected in CBE.</p>
<p>USPSTF recommends biennial screening mammography for women between 40 to 74 years of age.</p>
<p>If any symptom of cancer has been found, a more intensive diagnostic mammogram is conducted. It includes 3D Mammography (or Digital Breast Tomosynthesis), breast ultrasounds and breast MRIs.</p>
</section>
<section id="cervical-cancer-tests" class="level3">
<h3 class="anchored" data-anchor-id="cervical-cancer-tests">Cervical Cancer Tests</h3>
<p><em>4<sup>th</sup> most common cancer in women globally</em></p>
<p>The following tests are available:</p>
<ul>
<li>Human Papillomavirus (HPV) test</li>
<li>Pap (Papanicolaou) test / Pap smear</li>
<li>HPV/ Pap co-test</li>
</ul>
<p>The updated and preferred test recommended by the American Cancer Society (ACS) is a primary HPV test for women between ages 25-65 every 5 years.</p>
<blockquote class="blockquote">
<p><em>If primary HPV testing is not available, screening may be done with either a co-test that combines an HPV test with a Papanicolaou (Pap) test every 5 years or a Pap test alone every 3 years</em> - ACS</p>
</blockquote>
</section>
<section id="not-every-cancer-has-a-screening-test" class="level3">
<h3 class="anchored" data-anchor-id="not-every-cancer-has-a-screening-test">Not every cancer has a screening test</h3>
<p>The main purpose of a screening test is to find signs of cancer before symptoms start appearing. Itâ€™s efficacy is also measured by the extent a test is able to reduce the risk of cancer related deaths. Prostate, pancreatic, liver, ovarian, skin, testicular, thyroid, oral and brain cancers are some of the cancer subtypes for which no current screening tests have shown to reduce deaths from those cancers. Unfortunately, they typically are not diagnosed until they are advanced, very difficult to treat, and highly lethal. While research and ongoing clinical trails should yield a solution in the future, there is no standard form of screening tests available for these cancers. Despite this, a number of tests can be conducted based on patient history and should be consulted with a physician.</p>
<ul>
<li><strong>Liver Cancer Test -</strong> a combination of alpha-fetoprotein&nbsp;blood test&nbsp;and liver ultrasound is the most common form of test used.</li>
<li><strong>Ovarian Cancer Test -</strong> CA-125 Blood test + transvaginal ultrasound/transvaginal sonography</li>
<li><strong>Prostate Test -</strong> PSA Blood Test + Digital Rectal Exam [USPSTF recommends 55-69yrs</li>
<li><strong>Skin Cancer</strong> (<em>most common form of cancer in the US</em>) - skin exam by physician</li>
</ul>
</section>
<section id="what-are-multi-cancer-detection-tests-mcd" class="level3">
<h3 class="anchored" data-anchor-id="what-are-multi-cancer-detection-tests-mcd">What are Multi-cancer Detection Tests (MCD)?</h3>
<p>MCDs are tests which check for biomarkers / tumor markers using any body fluids as samples. Tumor markers could be any dysregulated gene or protein expression or a gene mutation which is a strong indicator of presence of cancer cells. <strong>No MCD tests have been approved by the US FDA</strong>. Nonetheless, several companies offer MCD tests as Laboratory Developed Tests (LDTs) to physicians and consumers. Following CLIA regulations (1988), these tests are not required to provide evidence that they provide a clinical benefit to patients, like early cancer diagnosis.</p>
<p>Examples of tumor markers include CA-125 (ovarian cancer), CA-19 (pancreatic cancer), estrogen receptor and progesterone receptor (breast cancer), CEA (colon cancer), PCA3 mRNA and TMPRSS2-ERG gene fusion (in prostate cancer), and EGFR gene mutation (in non-small cell lung cancer)</p>
</section>
<section id="word-of-caution" class="level3">
<h3 class="anchored" data-anchor-id="word-of-caution">Word of caution!</h3>
<p>A number of things must be kept in mind before your start knowing which screening tests are suitable for you. It involves a lot of things including you and your familyâ€™s medical history, genetic screening in some cases, lifestyle choices, mental and physical preparedness. Some of these tests, conducted repeatedly or incorrectly can place a heavy toll on your body. <strong>Ask your physician about when to start screening, and how often to be screened</strong>.</p>
<p>While the tests are formulated with utmost rigor and the best interests of people in mind, they still are not 100% reliable tests. The screening tests developed so far are not a <em>one-size-fits-all</em> or <em>one-test-for-all</em> kind of tests. They are susceptible to false positives and can lead to unnecessary anxiety by the results. Overdiagnosis or undertreatment can happen in certain cases. Some of the tests mentioned above involve radiation which can deteriorate the body upon prolonged exposure. A big concern is the possibility of a false-negative result: Cancer can be lurking within the body and yet the test might show a healthy result. Cancer is an evolving disease, and while scientists and clinicians are able to understand a good part of it, they are humble in accepting that there is still a lot to discover.</p>
<p>For further information, please read <a href="https://www.cancer.gov/about-cancer/screening/research/what-screening-statistics-mean">What Screening Statistics Mean</a></p>
</section>
<section id="sources" class="level3">
<h3 class="anchored" data-anchor-id="sources">Sources</h3>
<ul>
<li><a href="https://www.abcf.org/">American Breast Cancer Foundation</a></li>
<li><a href="https://www.cancer.gov/">National Cancer Institute</a></li>
<li><a href="https://www.cancer.org/cancer/cervical-cancer/detection-diagnosis-staging/cervical-cancer-screening-guidelines.html">American Cancer Society</a></li>
</ul>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "î§‹";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/sanaz01\.github\.io\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>